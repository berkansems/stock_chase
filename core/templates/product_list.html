{% extends 'master_panel.html' %}

{% load static %}
{% block content %}

    <div id="page-content">
        <!-- Datatables Header -->
        <div class="content-header">
            <div class="header-section">
                <h1>
                    <i class="fa fa-table"></i>Manage Products <br>
                </h1>
            </div>
            <div class="breadcrumb breadcrump-top">
                <li>Products</li>
                <li><a href="#">List</a></li>
            </div>
        </div>


        <div class="block full">
            <div class="block-title">
                <h2><strong>Products</strong> List</h2>
            </div>

            <div class="table-responsive">
                <table id="example-datatable" class="table table-vcenter table-condensed table-bordered">
                    <thead>
                    <tr>
                        <th class="text-center">#</th>
                        <th class="text-center ">Name</th>
                        <th class="text-center ">Stock Code</th>
                        <th class="text-center ">Sales Channel</th>
                        <th class="text-center ">Is Bundle?</th>
                        <th class="text-center ">Stock Amount</th>
                        <th class="text-center">Stock</th>
                        <th class="text-center ">Active?</th>
                        <th class="text-center">Edit</th>
                    </tr>
                    </thead>

                    {% for product in products %}
                        <tr {% if product.sales_channel == 'hepsiburada' %}
                            style="background-color: #f6f6f6" {% endif %}>
                            <td class="text-center">{{ forloop.counter }}</td>
                            <td class="text-left">{{ product.name }}</td>
                            <td class="text-center">{{ product.stock_code }} </td>
                            <td class="text-center"
                                style="{% if product.sales_channel == 'trendyol' %}color: yellowgreen{% else %} color: #9b59b6{% endif %}">{{ product.sales_channel }} </td>
                            <td class="text-center">{% if product.is_bundle %} <i class="fa fa-star"></i> {% endif %}
                            </td>
                            <td class="text-center">{{ product.stock }}</td>
                            <td class="text-center">
                                <div class="btn-group">
                                    <a href="{% url 'increase_stock' product.id %}" data-toggle="tooltip"
                                       class="btn btn-success"><i class="fa fa-plus"></i></a>

                                    <a href="{% url 'reduce_stock' product.id %}" data-toggle="tooltip"
                                       class="btn btn-danger"><i class="fa fa-minus"></i></a>
                                </div>
                            </td>
                            <td class="text-center"><span
                                    style="{% if product.status == False %} color: red {% endif %}">{{ product.status }}</span>
                                <a style="margin-left: 40px" href="{% url 'toggle_product_status' product.id %}"
                                   data-toggle="tooltip" title="change" class="btn btn-danger"> <i
                                        class="hi hi-sort"></i>
                                </a>
                            </td>


                            <td class="text-center">
                                <div class="btn-group">
                                    <a href="{% url 'edit_product' product.id %}" data-toggle="tooltip"
                                       class="btn btn-default"><i class="fa fa-pencil">EDIT</i></a>
                                    <a href="{% url 'delete_product' product.id %}" data-toggle="tooltip"
                                       class="btn btn-danger"><i class="fa fa-times">DELETE</i></a>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}


                </table>
                Page {{ products.number }} From {{ products.paginator.num_pages }}<br>
                {% if courses.has_previous %}
                    <a href="?page={{ products.previous_page_number }}" data-toggle="tooltip" title="Previous"
                       class="btn btn-xs btn-default"><i class="fa fa-backward"> Previous</i></a>
                {% endif %}
                {% for i in products.paginator.page_range %}
                    {% if products.number == i %}
                        <a href="#" onclick="return false; " data-toggle="tooltip" title="{{ Disables }}"
                           class="btn btn-xs btn-default">{{ i }}</a>
                    {% else %}
                        <a href="?page={{ i }}" data-toggle="tooltip" title="{{ i }}"
                           class="btn btn-xs btn-default"> {{ i }} </a>

                    {% endif %}
                {% endfor %}

                {% if courses.has_next %}
                    <a href="?page={{ products.next_page_number }}" data-toggle="tooltip" title="Next"
                       class="btn btn-xs btn-default"><i class="fa fa-forward"> Next</i></a>
                {% endif %}
            </div>
        </div>
    </div>

{% endblock %}

{% block footerblock %}

    <!-- Load and execute javascript code used only in this page -->
    <script src="{% static  'js/pages/tablesDatatables.js' %}"></script>
    <script>$(function () {
        TablesDatatables.init();
    });</script>
{% endblock %}